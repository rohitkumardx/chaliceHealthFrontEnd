<section class="main-banner">
  <div class="wrapper d-flex">
    <div class="content-wrapper">
      <div class="signup-card">
        <h3>Health Records</h3>
        <div class="signup-form">
          <mat-tab-group #tabGroup (selectedTabChange)="onTabChange($event)">


            <div [style.maxHeight]="isExpanded ? 'none' : '300px'" style="overflow: hidden;">
              
            </div>
            <button *ngIf="!isExpanded" (click)="toggleExpand()">See More</button>
            <button *ngIf="isExpanded" (click)="toggleExpand()">See Less</button>

            <mat-tab label="Allergy">
              <ng-template mat-tab-label>
                <span style="color: #00876F!important;">Allergy</span>
              </ng-template>
              <div class="mat-tab-content px-1">
                <br>

                <div class="companyInfo">
                  <form [formGroup]="allergyForm">
                    <div class="row companyContent mt-2">
                      <div class="form-group col-4">
                        <label for="allergyType">Allergy Type </label>
                        <input type="text" id="allergyType" class="form-control form-control-sm mt-1"
                          formControlName="allergyType">

                      </div>

                      <div class="form-group col-4">
                        <label for="allergen">Allergen</label>
                        <input type="text" id="allergen" class="form-control form-control-sm mt-1"
                          formControlName="allergen">

                      </div>

                      <div class="form-group col-4">
                        <label for="reaction">Reaction</label>
                        <input type="text" id="reaction" class="form-control form-control-sm mt-1"
                          formControlName="reaction">

                      </div>
                    </div>

                    <div class="row">
                      <div class="form-group col-12">
                        <label for="note">Notes </label>
                        <textarea id="note" class="form-control form-control-sm mt-1" formControlName="note"></textarea>

                      </div>
                    </div>

                    <div class="row">
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)="postAllergyData()"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{'fa-spinner fa-spin': isLoading}"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Save</span>
                        </button>
                      </div>
                    </div>
                  </form>
                  <div class="row align-items-center mt-1">
                    <!-- Buttons Section (Always on top in mobile, left on desktop) -->
                    <div class="col-12 col-md-9 mb-2 mb-md-0">
                      <div class="d-flex flex-wrap gap-2">
                        <h1 class="ms-2">Allergy List</h1>
                      </div>
                    </div>

                    <!-- Search Bar Section -->
                    <div class="col-12 col-md-3">
                      <input type="text" [(ngModel)]="searchTerm" placeholder="Search Allergy"
                        (input)="getAllergyDataList()" class="form-control" />
                    </div>

                  </div>

                  <div class="table-responsive mt-3">
                    <table class="table table-hover ">
                      <thead>
                        <tr>
                          <th style=" min-width: 150px;" scope="col" (click)="sortData('allergyType')">Allergy
                            Type
                            <i
                              [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'allergyType', 'fa-sort-up': sortColumn === 'allergyType' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'allergyType' && sortOrder === 'desc'}"></i>
                          </th>
                          <th style=" min-width: 150px;" scope="col" (click)="sortData('allergen')">Allergen
                            <i
                              [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'allergen', 'fa-sort-up': sortColumn === 'allergen' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'allergen' && sortOrder === 'desc'}"></i>
                          </th>
                          <th style=" min-width: 150px;" scope="col" (click)="sortData('reaction')">Reaction
                            <i
                              [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'reaction', 'fa-sort-up': sortColumn === 'reaction' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'reaction' && sortOrder === 'desc'}"></i>
                          </th>

                          <!-- <th scope="col">Reaction</th> -->
                          <th scope="col">Status</th>
                          <th scope="col">Action</th>
                        </tr>
                      </thead>
                      <tbody *ngIf="allergyData?.length > 0">
                        <tr *ngFor="let item of allergyData; let i = index">
                          <td>{{ item.allergyType || '-----' }}</td>
                          <td>{{ item.allergen || '-----' }}</td>
                          <td>{{ item.reaction || '-----' }}</td>
                          <td style="justify-items: center;">
                            <label class="switch">
                              <input class="switch-input" type="checkbox" [checked]="item.isActive"
                                (change)="toggleStatus(item.id, item.isActive)">
                              <span class="switch-label"></span>
                              <span class="switch-handle"></span>
                            </label>
                          </td>
                          <td>
                            <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editAllergyData(i)"
                              style="color:#00876f; font-size: medium;"></i>
                            <i class="fa-solid fa-trash cursor" (click)="deleteAllergyData(item.id)"
                              style="color:rgb(166, 7, 7); font-size: medium;"></i>
                          </td>
                        </tr>
                      </tbody>

                      <!-- Show message when no data -->
                      <tr *ngIf="!allergyData || allergyData?.length == null">
                        <td colspan="9" class="no-data-card">
                          <div
                            class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                            <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                              <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="no-data-content">
                              <span class="no-data-title text-xl font-semibold block mb-1">No Allergy Found</span>
                              <p class="no-data-description text-gray-600">
                                It looks like there are no allergies at the moment.<br>
                                Please check back later!
                              </p>

                            </div>
                          </div>
                        </td>
                      </tr>



                    </table>

                  </div>
                  <div class="mx-2 d-flex justify-content-end mt-2" *ngIf="allergyData || allergyData?.length != null">
                    <app-pagination [paginator]="paginator" (onPageChange)="getAllergyDataList()" />
                  </div>
                </div>

              </div>
            </mat-tab>
            <mat-tab label="Vitals">
              <ng-template mat-tab-label>
                <span style="color: #00876F!important;">Vitals</span>
              </ng-template>
              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br />
                <form [formGroup]="vitalForm">
                  <div class="companyInfo">
                    <div class="row companyContent mt-2">
                      <div class="form-group col-4">
                        <label for="height">Height</label>
                        <input type="number" step="any" id="height" placeholder="Height (in)"
                          class="form-control form-control-sm mt-1" formControlName="height" />
                      </div>

                      <div class="form-group col-4">
                        <label for="weight">Weight</label>
                        <input type="number" step="any" id="weight" placeholder="Weight (lbs)"
                          class="form-control form-control-sm mt-1" formControlName="weight" />
                      </div>

                      <div class="form-group col-4">
                        <label for="heartRate">Heart Rate</label>
                        <input type="number" id="heartRate" placeholder="Heart Rate (bpm)"
                          class="form-control form-control-sm mt-1" formControlName="heartRate" />
                      </div>
                    </div>

                    <div class="row mt-2">
                      <div class="form-group col-4">
                        <label for="bloodPressure">Blood Pressure</label>
                        <input type="number" id="bloodPressure" placeholder="Systolic BP (mmHg)"
                          class="form-control form-control-sm mt-1" formControlName="bloodPressure" />
                      </div>

                      <div class="form-group col-4">
                        <label for="bloodPressureDiastolic">Blood Pressure Diastolic</label>
                        <input type="number" id="bloodPressureDiastolic" placeholder="Diastolic BP (mmHg)"
                          class="form-control form-control-sm mt-1" formControlName="bloodPressureDiastolic" />
                      </div>

                      <div class="form-group col-4">
                        <label for="pulseOximeter">Pulse Oximeter</label>
                        <input type="number" step="any" id="pulseOximeter" placeholder="Pulse Oximeter (%)"
                          class="form-control form-control-sm mt-1" formControlName="pulseOximeter" />
                      </div>
                    </div>

                    <div class="row mt-2">
                      <div class="form-group col-4">
                        <label for="respiration">Respiration</label>
                        <input type="number" id="respiration" placeholder="Respiration (breaths per min)"
                          class="form-control form-control-sm mt-1" formControlName="respiration" />
                      </div>

                      <div class="form-group col-4">
                        <label for="temperature">Temperature</label>
                        <input type="number" step="any" id="temperature" placeholder="Temperature (°F)"
                          class="form-control form-control-sm mt-1" formControlName="temperature" />
                      </div>

                      <div class="col-sm-4">
                        <label for="vitalDate">Vital Date</label>
                        <input type="date" id="vitalDate" class="form-control form-control-sm mt-1"
                          formControlName="vitalDate" />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-9"></div>
                      <div class="col-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)="postVitalData()">
                          <i class="fas" [ngClass]="{ 'fa-spinner fa-spin': isLoading }"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Saving...</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <div class="row align-items-center mt-1">
                  <!-- Buttons Section -->
                  <div class="col-12 col-md-9 mb-2 mb-md-0">
                    <div class="d-flex flex-wrap gap-2">
                      <h1 class="ms-2">Vital List</h1>
                    </div>
                  </div>

                  <!-- Search Bar Section -->
                  <div class="col-12 col-md-3">
                    <!-- <input type="text" [(ngModel)]="searchTerm" placeholder="Search Vitals" (input)="getVitalDataList()"
                      class="form-control" /> -->
                  </div>
                </div>

                <div class="table-responsive mt-3">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('height')">
                          Height
                          <i
                            [ngClass]="{ 'fa': true, 'fa-sort': sortColumn !== 'height', 'fa-sort-up': sortColumn === 'height' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'height' && sortOrder === 'desc' }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('weight')">
                          Weight
                          <i
                            [ngClass]="{ 'fa': true, 'fa-sort': sortColumn !== 'weight', 'fa-sort-up': sortColumn === 'weight' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'weight' && sortOrder === 'desc' }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('bloodPressure')">
                          Blood Pressure
                          <i
                            [ngClass]="{ 'fa': true, 'fa-sort': sortColumn !== 'bloodPressure', 'fa-sort-up': sortColumn === 'bloodPressure' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'bloodPressure' && sortOrder === 'desc' }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('vitalDate')">
                          Vital Date
                          <i
                            [ngClass]="{ 'fa': true, 'fa-sort': sortColumn !== 'vitalDate', 'fa-sort-up': sortColumn === 'vitalDate' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'vitalDate' && sortOrder === 'desc' }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('temperature')">
                          Temperature
                          <i
                            [ngClass]="{ 'fa': true, 'fa-sort': sortColumn !== 'temperature', 'fa-sort-up': sortColumn === 'temperature' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'temperature' && sortOrder === 'desc' }"></i>
                        </th>
                        <th scope="col">Status</th>
                        <th scope="col">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of vitalData; let i = index">
                        <td>{{ item.height ? item.height + ' in' : '-----' }}</td>

                        <td>{{ item.weight ? item.weight + ' lbs' : '-----' }}</td>
                        <td>{{ item.bloodPressure ? item.bloodPressure + ' mmHg' : '-----' }}</td>

                        <td>{{ item.vitalDate ? (item.vitalDate | date: 'MM-dd-yyyy') : '-----' }}</td>
                        <td>{{ item.temperature ? item.temperature + ' °F' : '-----' }}</td>

                        <td style="justify-items: center;">
                          <label class="switch">
                            <input class="switch-input" type="checkbox" [checked]="item.isActive"
                              (change)="toggleVitalStatus(item.id, !item.isActive)" />
                            <span class="switch-label"></span>
                            <span class="switch-handle"></span>
                          </label>
                        </td>
                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editVitalData(i)"
                            style="color:#00876f;font-size: medium;"></i>
                          <i class="fa-solid fa-trash cursor" (click)="deleteVitalData(item.id)"
                            style="color:rgb(166, 7, 7); font-size: medium;"></i>
                        </td>
                      </tr>
                    </tbody>

                    <tr *ngIf="!vitalData || vitalData?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Vitals Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no vitals at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>

                <div class="mx-2 d-flex justify-content-end mt-2" *ngIf="vitalData || vitalData?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getVitalDataList()"></app-pagination>
                </div>
              </div>
            </mat-tab>

            <mat-tab label="Social History">
              <ng-template mat-tab-label>
                <span style="color: #00876F!important;">Social History</span>
              </ng-template>

              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br />
                <form [formGroup]="socialForm">
                  <div class="companyInfo">
                    <div class="row companyContent mt-2">
                      <div class="form-group col-4">
                        <label for="alcohol">Alcohol</label>
                        <input type="text" id="alcohol" class="form-control form-control-sm mt-1"
                          formControlName="alcohol" />
                      </div>

                      <div class="form-group col-4">
                        <label for="tobacco">Tobacco</label>
                        <input type="text" id="tobacco" class="form-control form-control-sm mt-1"
                          formControlName="tobacco" />
                      </div>

                      <div class="form-group col-4">
                        <label for="drugs">Drugs</label>
                        <input type="text" id="drugs" class="form-control form-control-sm mt-1"
                          formControlName="drugs" />
                      </div>
                    </div>

                    <div class="row">
                      <div class="form-group col-4">
                        <label for="occupation">Occupation</label>
                        <input type="text" id="occupation" class="form-control form-control-sm mt-1"
                          formControlName="occupation" />
                      </div>

                      <div class="form-group col-4">
                        <label for="travel">Travel</label>
                        <input type="text" id="travel" class="form-control form-control-sm mt-1"
                          formControlName="travel" />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)="postSocialData()"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{ 'fa-spinner fa-spin': isLoading }"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Save</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <div class="row align-items-center mt-1">
                  <div class="col-12 col-md-9 mb-2 mb-md-0">
                    <div class="d-flex flex-wrap gap-2">
                      <h1 class="ms-2">Social History List</h1>
                    </div>
                  </div>

                  <div class="col-12 col-md-3">
                    <input type="text" [(ngModel)]="searchTerm2" placeholder="Search By Alcohol"
                      (input)="getSocialDataList()" class="form-control" />
                  </div>
                </div>

                <div class="table-responsive mt-3">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('alcohol')">
                          Alcohol
                          <i [ngClass]="{
                  fa: true,
                  'fa-sort': sortColumn !== 'alcohol',
                  'fa-sort-up': sortColumn === 'alcohol' && sortOrder === 'asc',
                  'fa-sort-down': sortColumn === 'alcohol' && sortOrder === 'desc'
                }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('tobacco')">
                          Tobacco
                          <i [ngClass]="{
                  fa: true,
                  'fa-sort': sortColumn !== 'tobacco',
                  'fa-sort-up': sortColumn === 'tobacco' && sortOrder === 'asc',
                  'fa-sort-down': sortColumn === 'tobacco' && sortOrder === 'desc'
                }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('drugs')">
                          Drugs
                          <i [ngClass]="{
                  fa: true,
                  'fa-sort': sortColumn !== 'drugs',
                  'fa-sort-up': sortColumn === 'drugs' && sortOrder === 'asc',
                  'fa-sort-down': sortColumn === 'drugs' && sortOrder === 'desc'
                }"></i>
                        </th>
                        <th style="min-width: 150px;" scope="col" (click)="sortData('travel')">
                          Travel
                          <i [ngClass]="{
                  fa: true,
                  'fa-sort': sortColumn !== 'travel',
                  'fa-sort-up': sortColumn === 'travel' && sortOrder === 'asc',
                  'fa-sort-down': sortColumn === 'travel' && sortOrder === 'desc'
                }"></i>
                        </th>
                        <th scope="col">Status</th>
                        <th scope="col">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of socialData; let i = index">
                        <td>{{ item.alcohol || '-----' }}</td>
                        <td>{{ item.tobacco || '-----' }}</td>
                        <td>{{ item.drugs || '-----' }}</td>
                        <td>{{ item.travel || '-----' }}</td>
                        <td>
                          <label class="switch" disabled>
                            <input class="switch-input" type="checkbox" [checked]="item.isActive"
                              (change)="toggleSocialStatus(item.id, item.isActive)" />
                            <span class="switch-label"></span>
                            <span class="switch-handle"></span>
                          </label>
                        </td>
                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editSocialData(i)"
                            style="color: #00876f; font-size: medium;"></i>
                          <i class="fa-solid fa-trash cursor" (click)="deleteSocialData(item.id)"
                            style="color: rgb(166, 7, 7); font-size: medium;"></i>
                        </td>
                      </tr>
                    </tbody>
                    <tr *ngIf="!socialData || socialData?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Social History Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no social history at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>

                <div class="mx-2 d-flex justify-content-end mt-2" *ngIf="socialData || socialData?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getSocialDataList()"></app-pagination>
                </div>
              </div>
            </mat-tab>

            <mat-tab label="Medical History">
              <ng-template mat-tab-label>
                <span style="color: #00876F!important;">Medical History</span>
              </ng-template>

              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br />
                <form [formGroup]="medicalForm" (ngSubmit)="postMedicalData()">
                  <div class="companyInfo">
                    <div class="row companyContent mt-2">
                      <!-- Condition Name -->
                      <div class="form-group col-md-4 mb-0">
                        <label class="mt-3" for="conditionName">Condition Name</label>
                        <input type="text" id="conditionName" class="form-control form-control-sm mt-1"
                          formControlName="conditionName" />
                      </div>

                      <!-- Date of Diagnosis -->
                      <div class="form-group col-md-4 mb-0">
                        <label class="mt-3" for="dateOfDiagnosis">Date Of Diagnosis</label>
                        <input type="date" id="dateOfDiagnosis" class="form-control form-control-sm mt-1"
                          formControlName="dateOfDiagnosis" />
                      </div>

                      <!-- Current Status -->
                      <div class="form-group col-md-4 mb-0">
                        <label class="mt-3" for="currentStatus">Current Status <span class="red">*</span></label>
                        <select id="currentStatus" class="form-select form-select-sm cursor mt-1"
                          formControlName="currentStatus" [ngClass]="{
                'is-invalid':
                  medicalForm.get('currentStatus')?.invalid &&
                  medicalForm.get('currentStatus')?.touched
              }">
                          <option value="" disabled>Select</option>
                          <option value="1">Pending</option>
                          <option value="2">Rejected</option>
                          <option value="3">Approved</option>
                          <option value="4">Ongoing</option>
                        </select>
                        <div class="invalid-feedback" *ngIf="
                medicalForm.get('currentStatus')?.touched &&
                medicalForm.get('currentStatus')?.hasError('required')
              ">
                          Current Status is required.
                        </div>
                      </div>
                    </div>

                    <!-- Treatment Details -->
                    <div class="row">
                      <div class="form-group col-12">
                        <label class="mt-3" for="treatmentDetails">Treatment Details</label>
                        <textarea id="treatmentDetails" class="form-control form-control-sm mt-1"
                          formControlName="treatmentDetails"></textarea>
                      </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="row mt-3">
                      <div class="col-md-9"></div>
                      <div class="col-md-3 text-end">
                        <button type="submit" class="btn m-2 custom-padding" [disabled]="isLoading"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{ 'fa-spinner fa-spin': isLoading }"></i>
                          <span class="space">{{ isLoading ? 'Saving...' : 'Save' }}</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <!-- Search & Title -->
                <div class="row align-items-center mt-1">
                  <div class="col-12 col-md-9 mb-2 mb-md-0">
                    <div class="d-flex flex-wrap gap-2">
                      <h1 class="ms-2">Medical History List</h1>
                    </div>
                  </div>
                  <div class="col-12 col-md-3">
                    <input type="text" [(ngModel)]="searchTerm4" placeholder="Search By Condition Name"
                      (input)="getMedicalDataList()" class="form-control" />
                  </div>
                </div>

                <!-- Medical History Table -->
                <div class="table-responsive mt-2">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th style="min-width: 170px;" (click)="sortData('conditionName')">
                          Condition Name
                          <i [ngClass]="{
                          fa: true,
                         'fa-sort': sortColumn !== 'conditionName',
                         'fa-sort-up': sortColumn === 'conditionName' && sortOrder === 'asc',
                         'fa-sort-down': sortColumn === 'conditionName' && sortOrder === 'desc'
                          }"></i>
                        </th>
                        <th style="min-width: 150px;" (click)="sortData('dateOfDiagnosis')">
                          Diagnosis Date
                          <i [ngClass]="{
                          fa: true,
                         'fa-sort': sortColumn !== 'dateOfDiagnosis',
                         'fa-sort-up': sortColumn === 'dateOfDiagnosis' && sortOrder === 'asc',
                         'fa-sort-down': sortColumn === 'dateOfDiagnosis' && sortOrder === 'desc'
                         }"></i>
                        </th>
                        <th style="min-width: 150px;" (click)="sortData('currentStatus')">
                          Current Status
                          <i [ngClass]="{
                          fa: true,
                          'fa-sort': sortColumn !== 'currentStatus',
                          'fa-sort-up': sortColumn === 'currentStatus' && sortOrder === 'asc',
                          'fa-sort-down': sortColumn === 'currentStatus' && sortOrder === 'desc'
                          }"></i>
                        </th>
                        <th style="min-width: 150px;" (click)="sortData('treatmentDetails')">
                          Treatment Details
                          <i [ngClass]="{
                          fa: true,
                         'fa-sort': sortColumn !== 'treatmentDetails',
                         'fa-sort-up': sortColumn === 'treatmentDetails' && sortOrder === 'asc',
                         'fa-sort-down': sortColumn === 'treatmentDetails' && sortOrder === 'desc'
                         }"></i>
                        </th>
                        <th scope="col">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of medicalHistoryData; let i = index">
                        <td>{{ item.conditionName || '-----' }}</td>
                        <td>{{ item.dateOfDiagnosis ? (item.dateOfDiagnosis | date: 'MM-dd-yyyy') : '-----' }}</td>
                        <td>{{ item.currentStatus || '-----' }}</td>
                        <td style="max-width: 35%;">
                          <ng-container *ngIf="item.treatmentDetails && item.treatmentDetails.trim(); else noData">
                            <span *ngIf="!expanded">{{ getShortText(item.treatmentDetails) }}</span>
                            <span *ngIf="expanded">{{ item.treatmentDetails }}</span>
                            <a *ngIf="shouldShowToggle(item.treatmentDetails)" href="#" (click)="toggleExpand1($event)">
                              {{ expanded ? 'See Less' : 'See More' }}
                            </a>
                          </ng-container>
                          <ng-template #noData>-----</ng-template>
                        </td>

                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" style="color: #00876f; font-size: medium;"
                            (click)="editMedicalHistoryData(i)"></i>
                          <i class="fa-solid fa-trash cursor" style="color: rgb(166, 7, 7); font-size: medium;"
                            (click)="deleteMedicalHistoryData(item.id)"></i>
                        </td>
                      </tr>
                    </tbody>
                    <tr *ngIf="!medicalHistoryData || medicalHistoryData?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Medical History Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no medical history at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>

                <!-- Pagination -->
                <div class="mx-2 d-flex justify-content-end mt-2"
                  *ngIf="medicalHistoryData || medicalHistoryData?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getMedicalDataList()"></app-pagination>
                </div>
              </div>
            </mat-tab>

            <mat-tab label="Screening and preventive care">
              <ng-template mat-tab-label>
                <span style="color: #00876F!important;">Screening and Preventive Care</span>
              </ng-template>

              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br />
                <form [formGroup]="screeningForm">
                  <div class="companyInfo">
                    <div class="row g-3 companyContent mt-2">

                      <div class="col-md-4">
                        <label for="screeningTest" class="form-label">Screening Test Name</label>
                        <input type="text" id="screeningTest" class="form-control form-control-sm"
                          formControlName="screeningTest" />
                      </div>

                      <div class="col-md-4">
                        <label for="datePerformed" class="form-label">Date Performed</label>
                        <input type="date" id="datePerformed" class="form-control form-control-sm"
                          formControlName="datePerformed" />
                      </div>

                      <div class="col-md-4">
                        <label for="result" class="form-label">Result <span class="text-danger">*</span></label>
                        <select class="form-select form-select-sm" formControlName="result"
                          [ngClass]="{'is-invalid': screeningForm.get('result')?.invalid && screeningForm.get('result')?.touched}">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let item of obj" [value]="item.id">{{ item.value }}</option>
                        </select>
                        <div class="invalid-feedback"
                          *ngIf="screeningForm.get('result')?.touched && screeningForm.get('result')?.hasError('required')">
                          Result is required.
                        </div>
                      </div>

                      <div class="col-md-4 mt-3">
                        <label for="nextDueDate" class="form-label">Next Due Date</label>
                        <input type="date" id="nextDueDate" class="form-control form-control-sm"
                          formControlName="nextDueDate" />
                      </div>

                      <div class="col-12 mt-3">
                        <label for="notes" class="form-label">Notes</label>
                        <textarea id="notes" class="form-control form-control-sm" formControlName="notes"
                          rows="3"></textarea>
                      </div>

                      <div class="col-md-12 text-end mt-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)=" postScreeningData()"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{'fa-spinner fa-spin': isLoading}"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Save</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <!-- Title and Search -->
                <div class="row align-items-center mt-2">
                  <div class="col-md-9">
                    <h1 class="ms-2">Screening and Preventive Care List</h1>
                  </div>
                  <div class="col-md-3">
                    <input type="text" [(ngModel)]="searchTerm5" (input)="getScreeningDataList()"
                      placeholder="Search By Screening Test" class="form-control" />
                  </div>
                </div>

                <!-- Data Table -->
                <div class="table-responsive mt-2">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('screeningTest')">
                          Screening Test
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'screeningTest', 'fa-sort-up': sortColumn === 'screeningTest' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'screeningTest' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('datePerformed')">Date
                          Performed
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'datePerformed', 'fa-sort-up': sortColumn === 'datePerformed' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'datePerformed' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('patientResult')">
                          Result
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'patientResult', 'fa-sort-up': sortColumn === 'patientResult' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'patientResult' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('nextDueDate')">Next
                          Due Date
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'nextDueDate', 'fa-sort-up': sortColumn === 'nextDueDate' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'nextDueDate' && sortOrder === 'desc'}"></i>
                        </th>


                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of screeningData; let i = index">
                        <td>{{ item.screeningTest || '-----' }}</td>
                        <td>{{ item.datePerformed ? (item.datePerformed | date: 'MM-dd-yyyy') : '-----' }}</td>
                        <td>{{ item.patientResult || '-----' }}</td>
                        <td>{{ item.nextDueDate ? (item.nextDueDate | date: 'MM-dd-yyyy') : '-----' }}</td>


                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editScreeningData(i)"
                            style="color:#00876f;"></i>
                          <i class="fa-solid fa-trash cursor" (click)="deleteScreeningData(item.id)"
                            style="color:#a60707;"></i>
                        </td>
                      </tr>
                    </tbody>
                    <tr *ngIf="!screeningData || screeningData?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Screening and Preventive
                              Care Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no screening and preventive care at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>

                <!-- Pagination -->
                <div class="mx-2 d-flex justify-content-end mt-2"
                  *ngIf="screeningData || screeningData?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getScreeningDataList()"></app-pagination>
                </div>
              </div>
            </mat-tab>
            <mat-tab label="Immunisations">
              <ng-template mat-tab-label>
                <!-- <i class="fas fa-info-circle" style="color: #00876F!important;"></i>  -->
                <span style="color: #00876F!important;">Immunizations</span>
              </ng-template>
              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br>
                <form [formGroup]="immunisationForm">
                  <div class="companyInfo">
                    <div class="row companyContent mt-2">

                      <div class="form-group col-4 mb-0">
                        <label class="mt-3" for="vaccineName">Vaccine Name </label>
                        <input type="text" id="vaccineName" class="form-control form-control-sm mt-1"
                          formControlName="vaccineName">

                      </div>

                      <div class="form-group col-4 mb-0">
                        <label class="mt-3" for="vaccineCode">Vaccine Code </label>
                        <input type="text" id="vaccineCode" class="form-control form-control-sm mt-1"
                          formControlName="vaccineCode">

                      </div>

                      <div class="form-group col-4 mb-0">
                        <label class="mt-3" for="dose"> Dose </label>
                        <input type="text" id="dose" class="form-control form-control-sm mt-1" formControlName="dose">

                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-4 mb-0">
                        <label class="mt-3" for="lotNumber"> Lot Number </label>
                        <input type="number" id="lotNumber" class="form-control form-control-sm mt-1"
                          formControlName="lotNumber">

                      </div>

                      <div class="col-sm-4 mb-0">
                        <label class="mt-3" for="startDate"> Start Date </label>
                        <input type="date" id="startDate" class="form-control form-control-sm mt-1"
                          formControlName="startDate">

                      </div>

                      <div class="col-sm-4 mb-0">
                        <label class="mt-3" for="endDate"> End Date </label>
                        <input type="date" id="endDate" class="form-control form-control-sm mt-1"
                          formControlName="endDate">

                      </div>
                    </div>
                    <div class="row">
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)=" postImmunisationData()"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{'fa-spinner fa-spin': isLoading}"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Save</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <!-- Title and Search -->
                <div class="row align-items-center mt-2">
                  <div class="col-md-9">
                    <h1 class="ms-2">Immunizations List</h1>
                  </div>
                  <div class="col-md-3">
                    <input type="text" [(ngModel)]="searchTerm1" (input)="getImmunisationDataList()"
                      placeholder="Search By Vaccine Name" class="form-control" />
                  </div>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-hover ">
                    <thead>
                      <tr>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('vaccineName')">
                          Vaccine Name
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'vaccineName', 'fa-sort-up': sortColumn === 'vaccineName' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'vaccineName' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('vaccineCode')">
                          Vaccine Code
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'vaccineCode', 'fa-sort-up': sortColumn === 'vaccineCode' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'vaccineCode' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('dose')">Dose
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'dose', 'fa-sort-up': sortColumn === 'dose' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'dose' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('lotNumber')">Lot
                          Number
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'lotNumber', 'fa-sort-up': sortColumn === 'lotNumber' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'lotNumber' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('endDate')">
                          Expiration Date
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'endDate', 'fa-sort-up': sortColumn === 'endDate' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'endDate' && sortOrder === 'desc'}"></i>
                        </th>

                        <th scope='col'> Status</th>
                        <th scope="col">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of immunisationData; let i = index">
                        <td>{{ item.vaccineName || '-----' }}</td>
                        <td>{{ item.vaccineCode || '-----' }}</td>
                        <td>{{ item.dose || '-----' }}</td>
                        <td>{{item.lotNumber || '-----'}}</td>
                        <td>{{ item.endDate ? (item.endDate | date: 'MM-dd-yyyy') : '-----' }}</td>


                        <td style=" justify-items: center;">
                          <label class="switch" disabled>
                            <input class="switch-input" type="checkbox" [checked]="item.isActive"
                              (change)="toggleimmunizationStatus(item.id,item.isActive)">
                            <span class="switch-label"></span>
                            <span class="switch-handle"></span>
                          </label>
                        </td>

                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editImmunisationData(i)"
                            style="color:#00876f;font-size: medium;"></i>
                          <i class="fa-solid fa-trash cursor" (click)="deleteImmunisationData(item.id)"
                            style="color:rgb(166, 7, 7); font-size: medium;"></i>
                        </td>
                      </tr>
                    </tbody>
                    <tr *ngIf="!immunisationData || immunisationData?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Immunizations Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no immunizations at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="mx-2 d-flex justify-content-end mt-2"
                  *ngIf="immunisationData || immunisationData?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getImmunisationDataList()" />
                </div>

              </div>
            </mat-tab>
            <mat-tab label="Chronic Condition">
              <ng-template mat-tab-label>
                <!-- <i class="fas fa-info-circle" style="color: #00876F!important;"></i>  -->
                <span style="color: #00876F!important;">Chronic Condition</span>
              </ng-template>
              <div class="mat-tab-content px-1" style="overflow: hidden!important;">
                <br>
                <form [formGroup]="chronicForm">
                  <div class="companyInfo">
                    <div class="row companyContent mt-2">

                      <div class="form-group col-4 mb-0">
                        <label class="mt-3" for="conditionName">Condition Name </label>
                        <input type="text" id="conditionName" class="form-control form-control-sm mt-1"
                          formControlName="conditionName">

                      </div>
                      <div class="col-sm-4 mb-0">
                        <label class="mt-3" for="dateOfDiagnosis"> Date of Diagnosis</label>
                        <input type="date" id="dateOfDiagnosis" class="form-control form-control-sm mt-1"
                          formControlName="dateOfDiagnosis">

                      </div>
                      <div class="form-group col-4">
                        <label class="mt-3" for="severity"> Severity </label>
                        <input type="text" id="severity" class="form-control form-control-sm mt-1"
                          formControlName="severity">

                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group">
                        <label class="form-label" for="ongoingTreatment">Ongoing treatment</label>
                        <div class="radio-group">
                          <label>
                            <input type="radio" id="ongoingTreatmentYes" formControlName="onGoingTreatment"
                              [value]="true" />
                            Yes
                          </label>
                          <label>
                            <input type="radio" id="ongoingTreatmentNo" formControlName="onGoingTreatment"
                              [value]="false" />
                            No
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-12">
                        <label for="notes">Notes </label>
                        <textarea id="notes" class="form-control form-control-sm mt-1"
                          formControlName="notes"></textarea>

                      </div>
                    </div>
                    <div class="row">
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3">
                        <button type="submit" class="btn m-2 custom-padding" (click)="postChronicConditionData()"
                          style="background-color: #00876F!important;">
                          <i class="fas" [ngClass]="{'fa-spinner fa-spin': isLoading}"></i>
                          <span *ngIf="!isLoading" class="space">Save</span>
                          <span *ngIf="isLoading" class="space">Save</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <!-- Title and Search -->
                <div class="row align-items-center mt-2">
                  <div class="col-md-9">
                    <h1 class="ms-2">Chronic Condition List</h1>
                  </div>
                  <div class="col-md-3">
                    <input type="text" [(ngModel)]="searchTerm6" (input)="getChronicConditionList()"
                      placeholder="Search By Condition Name" class="form-control" />
                  </div>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-hover ">
                    <thead>
                      <tr>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('conditionName')">
                          Condition Name
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'conditionName', 'fa-sort-up': sortColumn === 'conditionName' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'conditionName' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('dateOfDiagnosis')">
                          Diagosis Date
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'dateOfDiagnosis', 'fa-sort-up': sortColumn === 'dateOfDiagnosis' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'dateOfDiagnosis' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('severity')">Severity
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'severity', 'fa-sort-up': sortColumn === 'severity' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'severity' && sortOrder === 'desc'}"></i>
                        </th>
                        <th style=" min-width: 150px;" scope="col" (click)="sortData('onGoingTreatment')">
                          Ongoing Treatment
                          <i
                            [ngClass]="{'fa': true, 'fa-sort': sortColumn !== 'onGoingTreatment', 'fa-sort-up': sortColumn === 'onGoingTreatment' && sortOrder === 'asc', 'fa-sort-down': sortColumn === 'onGoingTreatment' && sortOrder === 'desc'}"></i>
                        </th>

                        <th scope="col">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of chronicCondition; let i = index">
                        <td>{{ item.conditionName || '-----' }}</td>
                        <td>{{ item.dateOfDiagnosis ? (item.dateOfDiagnosis | date: 'MM-dd-yyyy') : '-----' }}</td>
                        <td>{{ item.severity || '-----' }}</td>
                        <td>{{ item.onGoingTreatment || '-----' }}</td>
                        <td>
                          <i class="fa-solid fa-pen-to-square me-3 cursor" (click)="editChronicConditionData(i)"
                            style="color:#00876f;font-size: medium;"></i>
                          <i class="fa-solid fa-trash cursor" (click)="deleteChronicConditionData(item.id)"
                            style="color:rgb(166, 7, 7); font-size: medium;"></i>
                        </td>
                      </tr>
                    </tbody>
                    <tr *ngIf="!chronicCondition || chronicCondition?.length == null">
                      <td colspan="9" class="no-data-card">
                        <div
                          class="no-data-card-container border rounded-xl shadow-md p-6 hover:shadow-xl transition-shadow duration-300 bg-white text-center">
                          <div class="no-data-icon text-yellow-500 text-4xl animate-bounce mb-2">
                            <i class="fas fa-exclamation-triangle"></i>
                          </div>
                          <div class="no-data-content">
                            <span class="no-data-title text-xl font-semibold block mb-1">No Chronic Condition
                              Found</span>
                            <p class="no-data-description text-gray-600">
                              It looks like there are no chronic condition at the moment.<br>
                              Please check back later!
                            </p>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="mx-2 d-flex justify-content-end mt-2"
                  *ngIf="chronicCondition || chronicCondition?.length != null">
                  <app-pagination [paginator]="paginator" (onPageChange)="getChronicConditionList()" />
                </div>

              </div>

            </mat-tab>

          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</section>